{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "definitions": {
    "AgentRequest": {
      "type": "object",
      "properties": {
        "input": {
          "type": "array",
          "description": "The input items to the agent, such as LLM messages.",
          "items": { "$ref": "#/definitions/AgentItem" }
        },
        "context": {
          "description": "The context to be used during tool calling and building system",
          "nullable": true
        }
      },
      "required": ["input", "context"]
    },
    "AgentResponse": {
      "type": "object",
      "properties": {
        "output": {
          "type": "array",
          "description": "The items generated during the agent's execution, such as new ToolMessage and AssistantMessage",
          "items": { "$ref": "#/definitions/AgentItem" }
        },
        "content": {
          "type": "array",
          "description": "The final output content generated by the agent.",
          "items": { "$ref": "file:///./sdk.json#/definitions/Part" }
        },
        "model_calls": {
          "type": "array",
          "description": "Model calls information, including usage and cost",
          "items": { "$ref": "#/definitions/ModelCallInfo" }
        }
      },
      "required": ["output", "content", "model_calls"]
    },
    "AgentItem": {
      "description": "An input for or output entry generated by the agent run",
      "oneOf": [{ "$ref": "#/definitions/AgentItemMessage" }]
    },
    "AgentItemMessage": {
      "description": "A LLM message used in the run",
      "allOf": [
        { "$ref": "file:///./sdk.json#/definitions/Message" },
        {
          "type": "object",
          "properties": {
            "type": { "const": "message" }
          },
          "required": ["type"]
        }
      ]
    },
    "ModelCallInfo": {
      "type": "object",
      "description": "Track a call to the LLM and record its usage and cost.",
      "properties": {
        "usage": {
          "oneOf": [
            { "$ref": "file:///./sdk.json#/definitions/ModelUsage" },
            { "type": "null" }
          ]
        },
        "cost": {
          "type": ["number", "null"]
        },
        "model_id": {
          "type": "string"
        },
        "provider": {
          "type": "string"
        }
      },
      "required": ["usage", "cost", "model_id", "provider"]
    },
    "AgentStreamEvent": {
      "description": "Stream events emitted by the agent during runStream call.",
      "oneOf": [
        { "$ref": "#/definitions/AgentStreamEventPartial" },
        { "$ref": "#/definitions/AgentStreamEventMessage" },
        { "$ref": "#/definitions/AgentStreamEventResponse" }
      ]
    },
    "AgentStreamEventPartial": {
      "allOf": [
        { "$ref": "file:///./sdk.json#/definitions/PartialModelResponse" },
        {
          "type": "object",
          "properties": {
            "type": { "const": "partial" }
          },
          "required": ["type"]
        }
      ]
    },
    "AgentStreamEventMessage": {
      "allOf": [{ "$ref": "#/definitions/AgentItemMessage" }]
    },
    "AgentStreamEventResponse": {
      "allOf": [
        { "$ref": "#/definitions/AgentResponse" },
        {
          "type": "object",
          "properties": {
            "type": { "const": "response" }
          },
          "required": ["type"]
        }
      ]
    }
  }
}
