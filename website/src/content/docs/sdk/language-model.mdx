---
title: Language model
---

import { Aside, Code, TabItem, Tabs } from "@astrojs/starlight/components";
import goGetModelCode from "../../../../../sdk-go/examples/model.go?raw";
import jsGetModelCode from "../../../../../sdk-js/examples/get-model.ts?raw";
import rustGetModelCode from "../../../../../sdk-rust/examples/common/mod.rs?raw";
import {
  extractGoTypes,
  extractRustTypes,
  extractTypescriptTypes,
} from "../../../utils/extract-types.ts";

A language model instance satisfies the `LanguageModel` interface, which includes the following:

- `provider`: The LLM provider name.
- `model_id`: The model identifier.
- `metadata`: Metadata about the model, such as pricing information or capabilities.
- `generate(LanguageModelInput) -> ModelResponse`: Generate a non-streaming response from the model.
- `stream(LanguageModelInput) -> AsyncIterable<PartialModelResponse>`: Generate a streaming response from the model.

All models in the library implement the LanguageModel interface and can be used interchangeably.

<Tabs>
  <TabItem label="TypeScript">
    <Code code={jsGetModelCode} lang="typescript" title="get-model.ts" />
  </TabItem>
  <TabItem label="Rust">
    <Code code={rustGetModelCode} lang="rust" title="mod.rs" />
  </TabItem>
  <TabItem label="Go">
    <Code code={goGetModelCode} lang="go" title="model.go" />
  </TabItem>
</Tabs>

## Language Model Input

`LanguageModelInput` is a unified format to represent the input for generating responses from the language model, applicable to both non-streaming and streaming requests. The library converts these inputs into corresponding properties for each LLM provider, if applicable. This allows specifying:

- The conversation history, which includes `UserMessage`, `AssistantMessage`, and `ToolMessage`.
- Sampling parameters: `max_tokens`, `temperature`, `top_p`, `top_k`, `presence_penalty`, `frequency_penalty`, and `seed`.
- Tool definitions and tool selection.
- The response format to enforce the model to return structured objects instead of plain text.
- `modalities` for the model to generate, such as text, images, or audio.
- Specific part output options like `audio`, `reasoning`.

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["LanguageModelInput"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["LanguageModelInput"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["LanguageModelInput"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

## Message

`Message`s are primitives that make up the conversation history, and [`Part`](#part) are the building blocks of each message. The library converts them into a format suitable for the underlying LLM provider and maps those from different providers to the unified format.

Three message types are defined in the SDK: `UserMessage`, `AssistantMessage`, and `ToolMessage`.

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["Message", "UserMessage", "AssistantMessage", "ToolMessage"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["Message", "UserMessage", "AssistantMessage", "ToolMessage"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["Message", "UserMessage", "AssistantMessage", "ToolMessage"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

## Part

The following `Part` types are implemented in the SDK: [`TextPart`](#text-part), [`ImagePart`](#image-part), [`AudioPart`](#audio-part), [`SourcePart`](#source-part) (for citation), [`ToolCallPart`](#tool-call-part), and [`ToolResultPart`](#tool-result-part).

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes([
        "Part",
      ])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes([
        "Part",
      ])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes([
        "Part",
      ])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

### Text Part

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["TextPart"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["TextPart"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["TextPart"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

### Image Part

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["ImagePart"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["ImagePart"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["ImagePart"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

### Audio Part

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["AudioPart", "AudioFormat"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["AudioPart", "AudioFormat"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["AudioPart", "AudioFormat"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

### Source Part

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["SourcePart"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["SourcePart"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["SourcePart"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

### Tool Call Part

<Aside>
  Tool calls are implemented as a `Part` instead of being a property of the
  `AssistantMessage`.
</Aside>

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["ToolCallPart"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["ToolCallPart"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["ToolCallPart"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

### Tool Result Part

<Aside>
  The `ToolResultPart` content is an array of `Part` instead of a string or an
  object. This enables non-text results to be returned for LLM providers that
  support them (e.g., Anthropic Function Calling supports images in tool
  results).
</Aside>

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["ToolResultPart"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["ToolResultPart"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["ToolResultPart"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

### Reasoning Part

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["ReasoningPart"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["ReasoningPart"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["ReasoningPart"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

## Citation

Certain parts include `Citation`s, which language models can use to cite `SourcePart` in their responses.

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["Citation"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["Citation"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["Citation"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

## Model Response

The response from the language model is represented as a `ModelResponse` that includes:

- `content`: An array of `Part` that represents the generated content, which usually comes from the `AssistantMessage`.
- `usage`: Token usage information, if available.
- `cost`: The estimated cost of the request, if the model's pricing information is provided.

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["ModelResponse", "ModelUsage", "ModelTokensDetails"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["ModelResponse", "ModelUsage", "ModelTokensDetails"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["ModelResponse", "ModelUsage", "ModelTokensDetails"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

For streaming calls, the response is represented as a series of `PartialModelResponse` objects that include:

- `delta`: A `PartDelta` and its index in the eventual `content` array.
- `usage`: Token usage information, if available.

<Tabs>
  <TabItem label="TypeScript">
    <Code
      code={extractTypescriptTypes(["ContentDelta", "PartialModelResponse"])}
      lang="typescript"
      title="types.ts"
    />
  </TabItem>
  <TabItem label="Rust">
    <Code
      code={extractRustTypes(["ContentDelta", "PartialModelResponse"])}
      lang="rust"
      title="types.rs"
    />
  </TabItem>
  <TabItem label="Go">
    <Code
      code={extractGoTypes(["ContentDelta", "PartialModelResponse"])}
      lang="go"
      title="types.go"
    />
  </TabItem>
</Tabs>

All SDKs provide the `StreamAccumulator` utility to help build the final `ModelResponse` from a stream of `PartialModelResponse`.
